# 解析精度チェックレポート (#25)

- 生成日時: 2026-02-13T14:35:12.745Z
- 総ケース数: 3
- PASS: 2
- FAIL: 1
- 総合判定: FAIL

## CASE-01 実固有値 (C#基準DAT -> Web再読込/再出力)
- 種別: roundtrip
- 判定: PASS
- 参照データ: `reference/modal/test_01_eig.dat`
- 生成データ: `reference/accuracy/generated/modal_roundtrip_web.dat`
- 補足: C#基準DATをWeb I/Oで再読込し、再出力結果と比較。
- 補足: 解析計算ではなく既存フォーマット互換と指標抽出の再現性を確認。

| 指標 | 閾値(相対) | 最大相対誤差 | 最大絶対誤差 | 件数(ref/target/比較) | 判定 | 備考 |
| --- | --- | --- | --- | --- | --- | --- |
| 実固有値: 固有振動数(Hz) | 1.0e-2 | 0.000e+0 | 0.000e+0 | 9/9/9 | PASS | 許容範囲内 |
| 実固有値: 刺激係数X | 3.0e-2 | 0.000e+0 | 0.000e+0 | 9/9/9 | PASS | 許容範囲内 |
| 実固有値: 刺激係数Y | 3.0e-2 | 0.000e+0 | 0.000e+0 | 9/9/9 | PASS | 許容範囲内 |
| 実固有値: 有効質量比X | 3.0e-2 | - | - | 0/0/0 | SKIP | 比較対象データなし |
| 実固有値: 有効質量比Y | 3.0e-2 | - | - | 0/0/0 | SKIP | 比較対象データなし |
| 実固有値: 固有ベクトルラベル | - | - | - | 9/9/9 | PASS | 一致 |
| 実固有値: 固有ベクトル主要成分 | 3.0e-2 | 0.000e+0 | 0.000e+0 | 81/81/81 | PASS | 許容範囲内 |

## CASE-02 複素固有値 (C#基準DAT vs Web解析)
- 種別: analysis
- 判定: FAIL
- 参照データ: `reference/complex/Test_simple_ceig.dat`
- 生成データ: `reference/accuracy/generated/complex_analysis_web.dat`
- 補足: 入力モデル: reference/building-model/Test_simple.json
- 補足: Web解析は state-space + `mathjs.eigs` 実装を使用。

| 指標 | 閾値(相対) | 最大相対誤差 | 最大絶対誤差 | 件数(ref/target/比較) | 判定 | 備考 |
| --- | --- | --- | --- | --- | --- | --- |
| 複素固有値: モード番号 | 0.0e+0 | 0.000e+0 | 0.000e+0 | 3/3/3 | PASS | 許容範囲内 |
| 複素固有値: 固有振動数(Hz) | 1.0e-2 | 1.220e-1 | 7.465e-1 | 3/3/3 | FAIL | 最大相対誤差 1.220e-1 > 1.000e-2 |
| 複素固有値: 減衰比(%) | 3.0e-2 | 8.928e-1 | 2.207e+1 | 3/3/3 | FAIL | 最大相対誤差 8.928e-1 > 3.000e-2 |
| 複素固有値: 固有値実部 | 3.0e-2 | 8.970e-1 | 4.970e+0 | 3/3/3 | FAIL | 最大相対誤差 8.970e-1 > 3.000e-2 |
| 複素固有値: 固有値虚部 | 1.0e-2 | 1.220e-1 | 4.689e+0 | 3/3/3 | FAIL | 最大相対誤差 1.220e-1 > 1.000e-2 |
| 複素モード: 正規化振幅 | 5.0e-2 | 1.000e+0 | 1.000e+0 | 9/9/9 | FAIL | 最大相対誤差 1.000e+0 > 5.000e-2 |
| 複素モード: 位相角(rad) | 5.0e-2 | 1.838e+0 | 3.278e+0 | 9/9/9 | FAIL | 最大相対誤差 1.838e+0 > 5.000e-2 |
| 複素モード: ベクトル成分ラベル(Mode 1) | - | - | - | 3/3/3 | PASS | 一致 |
| 複素モード: ベクトル成分ラベル(Mode 2) | - | - | - | 3/3/3 | PASS | 一致 |
| 複素モード: ベクトル成分ラベル(Mode 3) | - | - | - | 3/3/3 | PASS | 一致 |

## CASE-03 時刻歴 (C#基準CSV -> Web再読込/再出力)
- 種別: roundtrip
- 判定: PASS
- 参照データ: `reference/resp/test.csv`
- 生成データ: `reference/accuracy/generated/resp_roundtrip_web.csv`
- 補足: C#基準CSVをWeb I/Oで再読込し、最大応答・代表波形・時刻列整合を確認。
- 補足: 解析計算での再現比較には基準CSVに対応する入力波データが別途必要。

| 指標 | 閾値(相対) | 最大相対誤差 | 最大絶対誤差 | 件数(ref/target/比較) | 判定 | 備考 |
| --- | --- | --- | --- | --- | --- | --- |
| 時刻歴: 時刻列整合 | 0.0e+0 | 0.000e+0 | 0.000e+0 | 6001/6001/6001 | PASS | 許容範囲内 |
| 時刻歴: ヘッダ整合 | - | - | - | 25/25/25 | PASS | 一致 |
| 時刻歴: 最大変位(主要点) | 5.0e-2 | 6.594e-11 | 3.958e-10 | 11/11/11 | PASS | 許容範囲内 |
| 時刻歴: 最大加速度(主要点) | 5.0e-2 | 0.000e+0 | 0.000e+0 | 11/11/11 | PASS | 許容範囲内 |
| 時刻歴: 代表波形(DX_R,DY_R) | 5.0e-2 | 7.966e-5 | 5.000e-10 | 12002/12002/12002 | PASS | 許容範囲内 |
| 時刻歴: メタ情報(質点数,dt,ダンパー数) | 0.0e+0 | 0.000e+0 | 0.000e+0 | 3/3/3 | PASS | 許容範囲内 |

## 許容外差分の要因
- CASE-02: 複素固有値: 固有振動数(Hz) (最大相対誤差 1.220e-1 > 1.000e-2) / 複素固有値: 減衰比(%) (最大相対誤差 8.928e-1 > 3.000e-2) / 複素固有値: 固有値実部 (最大相対誤差 8.970e-1 > 3.000e-2)
- CASE-02の主要因: C#側の複素モード選別・減衰行列規約と、Web側(state-space + eigs)のモード抽出条件の差が大きい。

## 改善方針
- C#基準の入力セットを追加: 実固有値/時刻歴に対し、モデル+波形の対応データを reference 配下へ整備する。
- 検証自動化: `npm run check:accuracy` をCIに追加し、レポートをアーティファクト化する。
- 複素固有値の整合改善: モード対応付け(MAC等)と減衰行列の組成規約をC#実装に合わせて調整する。
